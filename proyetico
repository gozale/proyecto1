#!/bin/bash
menu_p()

menu_p(){
  H1='Ingresa si quieres ingresar a metodologías ágiles (ingrese -a) o a metodologías tradicionales (ingrese -t)'
  options=("-a" "-t" "Salir")
  select opt in "${options[@]}"
  do
    case $opt in 
      "-a")
        function_a()

        ;;
      "-t")
        function_t()
        ;;
      "Salir")
        break
        ;;
       *) echo "opción inválida $REPLY";;
    esac
  done
}

# Agregar info en a
agregarinfo() 
{
  echo $1
  echo "Escribe la info que quieres agregar: "
  read info
  echo "$info" >> $1
  echo "Información agregada correctamente"
  
  while true; do 
  echo "¿Quieres agregar mas información o regresar al menú?"
  echo "1. Agregar más info"
  echo "2. Regresar al menú"
  
  read choice
  case $choice in
    1)
        agregarinfo $1 
        ;;
      2)
        return
        ;;
      *)
        echo "Opción inválida"
        ;;
    esac
  done
}


# Ver la info de a
verinfo()
{
  cat $1
  while true; do
      echo "Presiona cualquier tecla para regresar al menú"
      read choice

      return
    done
}


# Borrar la info de a
borrarinfo()
{
  echo $1
  echo "Escribe que información quieres borrar: "
  read term
  grep -i "$term"  $1
  echo "Escribe el numero de linea que quieres borrar: "
  read numbers
  sed -i "${numbers}d" $1
  echo "Se borrarán las lineas que seleccionaste"
  
  while true; do
    echo "¿Quieres borrar mas información o regresar al menú?"
    echo "1. Borrar info"
    echo "2. Regresar al menú"

    read choice

    case $choice in
      1)
        borrarinfo $1
        ;;
      2)
        return
        ;;
      *)
        echo "Opción inválida"
        ;;
    esac
  done
}


# Buscar la info de a
buscarinfo()
{
  echo $1
  echo "Escribe que información quieres bucsar: "
  read term
  grep -i "$term"  $1
  while true; do 
  echo "¿Quieres buscar mas información o regresar al menú?"
  echo "1. Buscar más info"
  echo "2. Regresar al menú"
  
  read choice
  case $choice in
    1)
        buscarinfo $1
        ;;
      2)
        return
        ;;
      *)
        echo "Opción inválida"
        ;;
    esac
  done
}


menu() {
  while true; do
    H2= "Usted está en el menú $2"
    informacion = "Escribe que quieres hacer: "
    opciones = ("Agregar info", "Buscar info", "Borar info", "Ver info")
    select opc in "${opciones[@]}"
    do 
      case $opc in
        "Agregar info")
          echo "Seleccionaste agregar info"
          agregarinfo $1
          ;;
        "Buscar info")
          echo "Seleccionaste buscar info"
          buscarinfo $1
          ;;
        "Borrar info")
          echo "Seleccionaste borrar info"
          borrarinfo $1
          ;;
        "Ver info")
          echo "Seleccionaste ver info"
          ver info $1
         "Salir"
            break
            ;;
         *) echo "Opción invalida"
         ;;
        esac 
      done
} 


function_a()
{
echo "Bienvenido a la guía rápida de Agile, para continuar seleccione un tema:" 
optionsA = ("SCRUM", "X.P.", "Kanban", "Crystal", "Main Menu")

select optA in "${optionsA[@]}"
do
  case $optA in
    "SCRUM")
      echo "Usted esta en la sección SCRUM, seleccione la opción que desea utilizar."
      menu SCRUM.inf SCRUM
      ;;
     "X.P.")
      echo "Usted esta en la sección X.P., seleccione la opción que desea utilizar."
      menu XP.inf XP
      ;;
     "Kanban")
      echo "Usted esta en la sección Kanban, seleccione la opción que desea utilizar."
      menu Kanban.inf Kanban
      ;;
     "Crystal")
      echo "Usted esta en la sección Crystal, seleccione la opción que desea utilizar."
      menu Crystal.inf Crystal
      ;;
     "Main Menu"
      menu_p()
      ;;
}

function_t()
{
echo "Bienvenido a la guía rápida de Agile, para continuar seleccione un tema:" 
optionsA = ( "Cascada", "Espiral", "ModeloV", "Main Menu")

select optA in "${optionsA[@]}"
do
  case $optA in
    "Cascada")
      echo "Usted esta en la sección Cascada, seleccione la opción que desea utilizar."
      menu Cascada.inf Cascada
      ;;
     "Espiral")
      echo "Usted esta en la sección Espiral, seleccione la opción que desea utilizar."
      menu Espiral.inf Espiral
      ;;
     "ModeloV")
      echo "Usted esta en la sección Modelo V, seleccione la opción que desea utilizar."
      menu ModeloV.inf ModeloV
      ;;
     "Main Menu")
      menu_p()
      ;;
}

